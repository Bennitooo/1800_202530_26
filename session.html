<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Sessions - FitQuest</title>
    <meta name="comp1800 template" content="My 1800 App" />

    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Web Components for shared navbar and footer layout -->
    <script type="module" src="/src/components/site-navbar.js"></script>
    <script type="module" src="/src/components/site-footer.js"></script>

    <!-- Google Icons (Material Design)-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

    <!-- Link to styles of your own -->
    <link rel="stylesheet" href="./styles/style.css" />
    
  </head>
  <body class="pb-5">
    <!------------------------------>
    <!-- Your HTML Layout go here -->
    <!------------------------------>

    <!-- our own navbar goes here -->
    <site-navbar></site-navbar>

    <!-- Main content goes here -->
    <main class="container mt-4 mb-5">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="h4 mb-0">
          <i class="material-icons align-middle">fitness_center</i>
          Active Workout Sessions
        </h2>
        <span class="badge bg-primary fs-6" id="sessionCount">Loading...</span>
      </div>
      
      <!-- Info about current session -->
      <div id="currentSessionInfo" class="alert alert-success d-none mb-3">
        <i class="material-icons align-middle">info</i>
        <strong>Your active session is shown at the top with a green border!</strong>
      </div>
      
      <div id="sessionsList" class="row g-3">
        <div id="sessionsLoading" class="col-12 text-muted text-center">
          <div class="spinner-border spinner-border-sm" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <p class="mt-2">Loading sessions...</p>
        </div>
      </div>
    </main>

    <!-- Session Modal -->
    <div class="modal fade" id="sessionModal" tabindex="-1" aria-labelledby="sessionModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="sessionModalLabel">Session Details</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" id="sessionModalBody">
            <!-- Content will be inserted here -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="editSessionBtn">
              <i class="material-icons align-middle" style="font-size: 1rem;">login</i>
              Join Session
            </button>
          </div>
        </div>
      </div>
    </div>
    

    <!-- our own footer goes here -->
    <site-footer></site-footer>

    <!---------------------------------------------->
    <!-- Your own JavaScript functions go here    -->
    <!---------------------------------------------->

    <!-- Bootstrap Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Link to scripts of your own -->
    <script type="module" src="./src/main.js"></script>
    <!-- Firebase and authentication related scripts -->
    <script type="module" src="/src/firebaseConfig.js"></script>
    <script type="module" src="/src/authentication.js"></script>
    <script type="module" src="/src/sessionsList.js"></script>
  </body>
</html>
